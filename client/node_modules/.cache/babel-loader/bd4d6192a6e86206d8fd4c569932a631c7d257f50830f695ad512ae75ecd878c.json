{"ast":null,"code":"import * as PIXI from \"pixi.js\";\nimport { Deck } from \"./Deck\";\nimport { Card } from \"./Card\";\n\n// revive\n// buildShield\n// drawTavern\n// drawCastle\n\n// attack\n// discardHand\n// discardField\n// discardShield\n\nexport class Player {\n  constructor(app, sheet, state, isPlayer) {\n    this.app = app;\n    this.sheet = sheet;\n    this.state = state;\n    this.isPlayer = isPlayer;\n    this.positions = {\n      hand: {\n        x: 240,\n        y: 635\n      },\n      field: {\n        x: 240,\n        y: 475\n      },\n      shield: {\n        x: 840,\n        y: 475\n      },\n      tavern: {\n        x: 90,\n        y: 635\n      },\n      grave: {\n        x: 90,\n        y: 475\n      },\n      castle: {\n        x: 1110,\n        y: 635\n      },\n      jester: {\n        x: 1110,\n        y: 475\n      }\n    };\n    this.cardsContainer = new PIXI.Container();\n    this.cardsContainer.sortableChildren = true;\n    this.app.stage.addChild(this.cardsContainer);\n    this.handCount = state.handCount;\n    this.tavern = new Deck(app, sheet, \"tile028.jpg\", this.positions.tavern, state.tavern);\n    this.grave = new Deck(app, sheet, \"tile028.jpg\", this.positions.grave, state.grave);\n    this.castle = new Deck(app, sheet, \"tile013.jpg\", this.positions.castle, state.castle);\n    this.jester = new Deck(app, sheet, \"tile014.jpg\", this.positions.jester, state.jester);\n    this.hand = this.createCards(state.hand, this.isPlayer, this.positions.hand);\n    this.field = this.createCards(state.field, true, this.positions.field);\n    this.shield = this.createCards(state.shield, true, this.positions.shield);\n  }\n  createCards(locationState, isPlayer, start) {\n    const cards = [];\n    for (let index = 0; index < (isPlayer ? locationState.length : this.state.handCount); index++) {\n      const cardName = isPlayer ? locationState[index] : \"tile028.jpg\";\n      const card = new Card(this.cardsContainer, this.sheet, cardName, start);\n      cards.push(card);\n    }\n    this.repositionCards(cards, start);\n    return cards;\n  }\n  repositionCards(array, start) {\n    for (let index = 0; index < array.length; index++) {\n      const newPosition = {\n        x: start.x + index * 100,\n        y: start.y\n      };\n      array[index].moveTo(newPosition, true);\n    }\n  }\n  revive(x) {\n    this.grave.setSize(this.grave.size - x);\n    this.tavern.setSize(this.tavern.size + x);\n  }\n  buildShield(units) {\n    const cards = this.field.filter(card => units.includes(card.name));\n    this.field = this.field.filter(card => !units.includes(card.name));\n    for (const card in cards) {\n      this.shield.push(cards[card]);\n    }\n    this.repositionCards(this.field, this.positions.field);\n    this.repositionCards(this.shield, this.positions.shield);\n  }\n  drawTavern(x, units) {\n    this.tavern.setSize(this.tavern.size - x);\n    this.handCount += x;\n    if (this.isPlayer) {\n      for (const index in units) {\n        const card = new Card(this.cardsContainer, this.sheet, units[index], this.positions.tavern);\n        this.hand.push(card);\n      }\n    } else {\n      for (let step = 0; step < x; step++) {\n        const card = new Card(this.cardsContainer, this.sheet, \"tile028.jpg\", this.positions.tavern);\n        this.hand.push(card);\n      }\n    }\n    this.repositionCards(this.hand, this.positions.hand);\n  }\n  drawCastle(unit) {\n    this.castle.setSize(this.castle.size - 1);\n    this.handCount += 1;\n    const name = this.isPlayer ? this.castle.getName() : \"tile028.jpg\";\n    const card = new Card(this.cardsContainer, this.sheet, name, this.positions.castle);\n    this.castle.setName(unit);\n    this.hand.push(card);\n    this.repositionCards(this.hand, this.positions.hand);\n  }\n  attack(units) {\n    const x = units.length;\n    this.handCount -= x;\n    if (this.isPlayer) {\n      const cards = this.hand.filter(card => units.includes(card.name));\n      this.hand = this.hand.filter(card => !units.includes(card.name));\n      for (const card in cards) {\n        this.field.push(cards[card]);\n      }\n    } else {\n      const cards = this.hand.slice(-x);\n      this.hand = this.hand.splice(-x);\n      for (const card in cards) {\n        cards[card].reveal(units[card]);\n        this.field.push(cards[card]);\n      }\n    }\n    console.log(this.field);\n    this.repositionCards(this.field, this.positions.field);\n    this.repositionCards(this.hand, this.positions.hand);\n  }\n}","map":{"version":3,"names":["PIXI","Deck","Card","Player","constructor","app","sheet","state","isPlayer","positions","hand","x","y","field","shield","tavern","grave","castle","jester","cardsContainer","Container","sortableChildren","stage","addChild","handCount","createCards","locationState","start","cards","index","length","cardName","card","push","repositionCards","array","newPosition","moveTo","revive","setSize","size","buildShield","units","filter","includes","name","drawTavern","step","drawCastle","unit","getName","setName","attack","slice","splice","reveal","console","log"],"sources":["/Users/rabiibouhestine/mystuff/BrowserApps/Duels/client/src/game/components/Player.js"],"sourcesContent":["import * as PIXI from \"pixi.js\";\n\nimport { Deck } from \"./Deck\";\nimport { Card } from \"./Card\";\n\n// revive\n// buildShield\n// drawTavern\n// drawCastle\n\n// attack\n// discardHand\n// discardField\n// discardShield\n\nexport class Player {\n    constructor(app, sheet, state, isPlayer) {\n        this.app = app;\n        this.sheet = sheet;\n        this.state = state;\n        this.isPlayer = isPlayer;\n\n        this.positions = {\n            hand: {x: 240, y: 635},\n            field: {x: 240, y: 475},\n            shield: {x: 840, y: 475},\n            tavern: {x: 90, y: 635},\n            grave: {x: 90, y: 475},\n            castle: {x: 1110, y: 635},\n            jester: {x: 1110, y: 475}\n        };\n\n        this.cardsContainer = new PIXI.Container();\n        this.cardsContainer.sortableChildren = true;\n        this.app.stage.addChild(this.cardsContainer);\n\n        this.handCount = state.handCount;\n        this.tavern = new Deck(app, sheet, \"tile028.jpg\", this.positions.tavern, state.tavern);\n        this.grave = new Deck(app, sheet, \"tile028.jpg\", this.positions.grave, state.grave);\n        this.castle = new Deck(app, sheet, \"tile013.jpg\", this.positions.castle, state.castle);\n        this.jester = new Deck(app, sheet, \"tile014.jpg\", this.positions.jester, state.jester);\n        this.hand = this.createCards(state.hand, this.isPlayer, this.positions.hand);\n        this.field = this.createCards(state.field, true, this.positions.field);\n        this.shield = this.createCards(state.shield, true, this.positions.shield);\n    }\n\n    createCards(locationState, isPlayer, start) {\n        const cards = [];\n        for (let index = 0; index < (isPlayer ? locationState.length : this.state.handCount); index++) {\n            const cardName = isPlayer ? locationState[index] : \"tile028.jpg\";\n            const card = new Card(this.cardsContainer, this.sheet, cardName, start);\n            cards.push(card);\n        }\n        this.repositionCards(cards, start);\n        return cards;\n    }\n\n    repositionCards(array, start) {\n        for (let index = 0; index < array.length; index++) {\n            const newPosition = {\n                x: start.x + (index * 100),\n                y: start.y\n            };\n            array[index].moveTo(newPosition, true);\n        }\n    }\n\n    revive(x) {\n        this.grave.setSize(this.grave.size - x);\n        this.tavern.setSize(this.tavern.size + x);\n    }\n\n    buildShield(units) {\n        const cards = this.field.filter(card => units.includes(card.name));\n        this.field = this.field.filter(card => !units.includes(card.name));\n        for (const card in cards) {\n            this.shield.push(cards[card]);\n        }\n        this.repositionCards(this.field, this.positions.field);\n        this.repositionCards(this.shield, this.positions.shield);\n    }\n\n    drawTavern(x, units) {\n        this.tavern.setSize(this.tavern.size - x);\n        this.handCount += x;\n        if (this.isPlayer) {\n            for (const index in units) {\n                const card = new Card(this.cardsContainer, this.sheet, units[index], this.positions.tavern);\n                this.hand.push(card);\n            }\n        } else {\n            for (let step = 0; step < x; step++) {\n                const card = new Card(this.cardsContainer, this.sheet, \"tile028.jpg\", this.positions.tavern);\n                this.hand.push(card);\n            }\n        }\n        this.repositionCards(this.hand, this.positions.hand);\n    }\n\n    drawCastle(unit) {\n        this.castle.setSize(this.castle.size - 1);\n        this.handCount += 1;\n        const name = this.isPlayer? this.castle.getName() : \"tile028.jpg\";\n        const card = new Card(this.cardsContainer, this.sheet, name, this.positions.castle);\n        this.castle.setName(unit);\n        this.hand.push(card);\n        this.repositionCards(this.hand, this.positions.hand);\n    }\n\n    attack(units) {\n        const x = units.length;\n        this.handCount -= x;\n        if (this.isPlayer) {\n            const cards = this.hand.filter(card => units.includes(card.name));\n            this.hand = this.hand.filter(card => !units.includes(card.name));\n            for (const card in cards) {\n                this.field.push(cards[card]);\n            }\n        } else {\n            const cards = this.hand.slice(-x);\n            this.hand = this.hand.splice(-x);\n            for (const card in cards) {\n                cards[card].reveal(units[card]);\n                this.field.push(cards[card]);\n            }\n        }\n        console.log(this.field);\n        this.repositionCards(this.field, this.positions.field);\n        this.repositionCards(this.hand, this.positions.hand);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}